<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="egovframework.edutrack.modules.lecture.assignment.service.impl.AssignmentSubMapper">
	<select id="selectKey" resultType="Integer">
		SELECT nextval('SQ_LEC_ASMT_SUB')
	</select>
	
	<select id="list" parameterType="assignmentVO" resultType="assignmentSubVO">
		<!--   -->
		SELECT  CRS_CRE_CD												
		        ,  ASMT_SN													
		        ,  ASMT_SUB_SN												
		        ,  ASMT_TITLE												
		        ,  ASMT_CTS												
		        ,  EDITOR_YN												
		        ,  REG_NO													
		        ,  REG_DTTM												
		        ,  MOD_NO													
		        ,  MOD_DTTM												
			     ,  (SELECT FN_GET_USER_NAME(MOD_NO)) AS MOD_NM	
			     ,  (SELECT FN_GET_USER_NAME(REG_NO)) AS REG_NM	
		     FROM  tb_lec_asmt_sub											
		    WHERE  CRS_CRE_CD 	= #{crsCreCd}									
		      AND  ASMT_SN 	= #{asmtSn}									
		    ORDER  BY REG_DTTM
	</select>
	
	<select id="select" parameterType="assignmentSubVO" resultType="assignmentSubVO">
		<!--   -->
		SELECT  CRS_CRE_CD												
		        ,  ASMT_SN													
		        ,  ASMT_SUB_SN												
		        ,  ASMT_TITLE												
		        ,  ASMT_CTS												
		        ,  EDITOR_YN												
		        ,  REG_NO													
		        ,  REG_DTTM												
		        ,  MOD_NO													
		        ,  MOD_DTTM												
			     ,  (SELECT FN_GET_USER_NAME(MOD_NO)) AS MOD_NM	
			     ,  (SELECT FN_GET_USER_NAME(REG_NO)) AS REG_NM	
		     FROM  tb_lec_asmt_sub											
		    WHERE  CRS_CRE_CD = #{crsCreCd}									
		      AND  ASMT_SN = #{asmtSn}										
		      AND  ASMT_SUB_SN = #{asmtSubSn}
	</select>
	
	<insert id="insert" parameterType="assignmentSubVO">
		<!--   -->
		INSERT  INTO tb_lec_asmt_sub (					
		           CRS_CRE_CD								
		        ,  ASMT_SN									
		        ,  ASMT_SUB_SN								
		        ,  ASMT_TITLE								
		        ,  ASMT_CTS								
		        ,  EDITOR_YN								
		        ,  REG_NO									
		        ,  REG_DTTM								
		        ,  MOD_NO									
		        ,  MOD_DTTM								
			) VALUES (										
		           #{crsCreCd}								
		        ,  #{asmtSn}									
		        ,  #{asmtSubSn}								
		        ,  #{asmtTitle}								
		        ,  #{asmtCts}								
		        ,  #{editorYn}
		        ,  #{regNo}									
		        ,  DATE_FORMAT(NOW(), '%Y%m%d%H%i%s') 	
		        ,  #{modNo}									
		        ,  DATE_FORMAT(NOW(), '%Y%m%d%H%i%s') 	
			)
	</insert>
	
	<update id="update" parameterType="assignmentSubVO">
		<!--  -->
		UPDATE  tb_lec_asmt_sub                                     	
		  	   SET  CRS_CRE_CD     =  #{crsCreCd}                           	
		        ,   ASMT_SN       =  #{asmtSn}                             	
		        ,   ASMT_SUB_SN   =  #{asmtSubSn}                          	
		        ,   ASMT_TITLE    =  #{asmtTitle}                          	
		        ,   ASMT_CTS      =  #{asmtCts}                            	
		        ,   EDITOR_YN     =  #{editorYn}                            	
		        ,   MOD_NO        =  #{modNo}     							
		        ,   MOD_DTTM      =  DATE_FORMAT(NOW(), '%Y%m%d%H%i%s') 
		    WHERE  CRS_CRE_CD     =  #{crsCreCd}                           	
		      AND  ASMT_SN        =  #{asmtSn}                              	
		      AND  ASMT_SUB_SN    =  #{asmtSubSn}
	</update>
	
	<delete id="delete" parameterType="assignmentSubVO">
		<!--   -->
		DELETE  FROM tb_lec_asmt_sub              		
		  	 WHERE  CRS_CRE_CD   = 		#{crsCreCd}         	
		      AND  ASMT_SN      = 		#{asmtSn}       
		      AND  ASMT_SUB_SN  = 		#{asmtSubSn}    	
	</delete>
	
	<delete id="deleteAll" parameterType="assignmentVO">
		<!--   -->
		DELETE  FROM tb_lec_asmt_sub              		
		  	 WHERE  CRS_CRE_CD   = 		#{crsCreCd}         	
		      AND  ASMT_SN      = 		#{asmtSn}           	
	</delete>
	
</mapper>