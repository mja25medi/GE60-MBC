!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):((e=e||self).flowplayer=e.flowplayer||{},e.flowplayer.flashls=n())}(this,(function(){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */var e=function(){return(e=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e}).apply(this,arguments)};function n(e){var n=document.createElement("a");n.href=e;var t=n.pathname&&n.pathname.split(".");return t.length>1&&t[t.length-1]}function t(e){switch(e){case"video/mpd":return"application/dash+xml";case"video/m3u8":return"application/x-mpegurl";default:return e}}var r=function(r){var i=r.src,o=function(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(t[r[i]]=e[r[i]])}return t}(r,["src"]);return[e({src:i,type:t("video/"+n(i))},o)]};function i(e){var n,i=e.split("{"),o=i[0],a=i[1];return a?(n=o,a.slice(0,-1).split(",").map((function(e){return{src:n+e,type:t("video/"+e)}}))):r({src:e})}function o(e,n){try{var t=n.exec(e)[1];return parseFloat(t,10)}catch(e){return console.error(e),0}}function a(){var e="undefined"!=typeof document&&"undefined"!=typeof window,n=e?navigator.userAgent:"",t=/iP(hone|od)/i.test(n)&&!/iPad/.test(n)&&!/IEMobile/i.test(n),r=/Android/.test(n)&&!/Firefox/.test(n),i=/IEMobile/.test(n),a=i?o(n,/Windows Phone (\d+\.\d+)/):0,u=i?o(n,/IEMobile\/(\d+\.\d+)/):0,s=/^((?!chrome|android).)*safari/i.test(n),f=function(){if(!e)return!1;if(document.documentMode)return document.documentMode;for(var n=9;n>3;n--){var t=document.createElement("div");if(t.innerHTML="\x3c!--[if IE "+n+"]><span></span><![endif]--\x3e",t.getElementsByTagName("span").length)return n}return!1}();return{controls:!t&&(!i||a>=8.1&&u>=11),video:function(n){return e&&document.createElement("video").canPlayType(n)},lang:e&&(window.navigator.userLanguage||window.navigator.language),android:r,iphone:t,ie:f,safari:s,ios:e&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream}}var u=[].slice;function s(e,n,t){for(var r=function(e){return Array.isArray(e)?e.slice(0):e.split(".")}(n);r.length;){if(null==e)return t;var i=r.shift();if("string"!=typeof i)return t;e=e[i]}return null==e?t:e}var f="com.widevine.alpha";var c=/\.m3u8$/,l="application/vnd.apple.mpegURL",d=[l,"application/x-mpegurl"];function p(e){var n=e.split("?").shift();return n&&c.test(n)}function v(e){return"object"==typeof e}var m=!!function(){var e=!1;try{var n=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("testPassive",null,n),window.removeEventListener("testPassive",null,n)}catch(e){}return e}()&&{passive:!0},y=["touchstart","touchmove"];function h(e){return e.emit=function(n,t,r){r=r||{};var i=function(e){var n=document.createEvent("Event");return n.initEvent(e,!1,!0),n}(n);return t&&function(e,n){for(var t=[],r=2;r<arguments.length;r++)t[r-2]=arguments[r];for(var i in n)e[i]=n[i]}(i,{data:t||{}}),e.dispatchEvent(i),!1===r.return_self?i:e},e.on=function(n,t){return"string"==typeof n&&(n=n.split(" ")),n.forEach((function(n){return function(e){return~y.indexOf(e)}(n)?e.addEventListener(n,t,m):e.addEventListener(n,t)})),e},e.off=function(n,t){return e.removeEventListener(n,t),e},e.one=e.once=function(n,t){return e.on(n,(function r(i){e.off(n,r),t(i)}))},e}var g=Array.isArray,w="undefined"!=typeof window&&h(window),b="undefined"!=typeof document&&h(document),E=["span","a","em","p","i"],x=E.concat(["div","strong","video","img","ol","ul","li","script"]);function _(e,n,t){var r=j(document.createElement(e));if(g(n)&&(t=n,n=!1),g(t)||(t=[t]),r.append(t.filter((function(e){return e}))),"object"!=typeof n)return r;for(var i in n)i in r?r[i]=n[i]:r.setAttribute(i,n[i]);return r}function O(e){var n=e.tagName;e.__flowplayer__=1,e.find=function(n){var t=e.querySelector(n);return t?j(t):t},e.html=function(n){return e.innerHTML=n,e},e.empty=function(){return e.innerHTML="",e},e.offset=function(){var n={top:0,left:0},t=e;do{n.left+=t.offsetLeft||0,n.top+=t.offsetTop||0}while(t=t.offsetParent);return n},e.innerWidth=function(){var n=getComputedStyle(e);return e.clientWidth-parseFloat(n.paddingLeft)-parseFloat(n.paddingRight)};var t=e.insert=function(n,t){return g(t)?t.map((function(t){return e.insert(n,t)}))[0]:j(t="string"==typeof t?e.insertAdjacentHTML(n,t):e.insertAdjacentElement?e.insertAdjacentElement(n,t):e.appendChild(t))};return e.append=t.bind(e,"beforeend"),e.prepend=t.bind(e,"afterbegin"),e.css=function(n,t){if("object"==typeof n){for(var r in n)e.css(r,n[r]);return e}return void 0===t?getComputedStyle(e)[n]:(1*t&&(t+="px"),e.style[n]=t,e)},e.show=function(){return e.css({display:~E.indexOf(n)?"inline":"block"})},e.hide=function(){return e.css({display:"none"})},e.remove=function(){var n=e.parentNode;n&&n.removeChild(e)},e.attr=function(n,t){return null==t?e.getAttribute(n):(e.setAttribute(n,t),e)},e.txt=function(n){return e.textContent=n,e},e.fp=function(n){return e.addClass("fp-"+n)},e.addClass=function(n){return n.split(" ").forEach((function(n){e.hasClass(n)||(e.className+=(e.className?" ":"")+n)})),e},e.removeClass=function(n){n=n.split(" ");var t=e.className.split(" ");return e.className=t.filter((function(e){return!~n.indexOf(e)})).join(" "),e},e.toggleClass=function(n,t){return void 0===t&&(t=!e.hasClass(n)),t?e.addClass(n):e.removeClass(n)},e.findAll=function(n){return t=e.querySelectorAll(n),u.call(t);var t},e.hasClass=function(n){return~e.className.split(" ").indexOf(n)},e}function j(e){return void 0===e||function(e){return e&&e.__flowplayer__}(e)?e:O(h(e))}function A(e,n){if("string"==typeof e&&"<"==e[0])return _(e.slice(1,-1),n);if("string"!=typeof e)return j(e);var t=n instanceof HTMLElement&&n.querySelector(".fp-"+e)||document.querySelector(e);return t?j(t):void 0}A.window=w,A.document=b,A.el=_,x.forEach((function(e){A[e]=function(n,t){return"string"==typeof n&&(n={class:n}),_(e,n,t)}}));function C(e,n,t,r){if(r){t.css({display:"none"});var i=function(e,n,t,r){t=t||"opaque";var i="obj"+(""+Math.random()).slice(2,15),o='<object class="fp-flashls fp-engine is-initialising" id="'+i+'" name="'+i+'" ',a=navigator.userAgent.indexOf("MSIE")>-1;o+=a?'classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000">':' data="'+e+'" type="application/x-shockwave-flash">';var u={width:"100%",height:"100%",allowscriptaccess:"always",wmode:t,quality:"high",flashvars:"",movie:e+(a?"?"+i:""),name:i};"transparent"!==t&&(u.bgcolor=r||"#333333");Object.keys(n).forEach((function(e){u.flashvars+=e+"="+n[e]+"&"})),Object.keys(u).forEach((function(e){o+='<param name="'+e+'" value="'+u[e]+'"/>'})),o+="</object>";var s=document.createElement("div");return s.innerHTML=o,A(s.querySelector("object"))}("//releases.flowplayer.org/7.2.7/commercial/flowplayerhls.swf",{url:r.src,origin:"https://flowplayer.com",key:"$770688346451035"});n.prepend(i),n.toggleClass("is-flashls",!0);var o=!0,a={currentTime:0,duration:NaN,paused:!0,playing:!1,volume:t.volume,ended:!1};setInterval((function(){try{var e=i.__status();if(!e.buffer)return;o&&(o=!1,t.emit("loadedmetadata"),e.duration&&(t.emit("durationchange",e.duration),a.duration=e.duration),i.toggleClass("is-initialising"),i.__volume(t.volume)),e.time!=a.currentTime&&(a.currentTime=e.time,t.emit("timeupdate",e.time)),!a.ended&&e.time>=e.duration&&(a.ended=!0,a.paused=!0,a.playing=!1,t.emit("pause"),t.emit("ended"))}catch(e){}}),250),Object.keys(a).forEach((function(e){Object.defineProperty(t,e,{get:function(){return a[e]},set:function(n){switch(e){case"currentTime":i.__seek(n);break;case"volume":i.__volume(n)}a[e]=n}})})),t.play=function(){i.__resume(),t.emit("playing"),t.paused=!1,t.playing=!0,t.ended=!1},t.pause=function(){i.__pause(),t.emit("pause"),t.paused=!0,t.playing=!1}}}return C.wants=function(e,n,t){var r=s(t,"hls.native",!1);if(a().video(l)&&r)return!1;if(n&&n.drm&&(0===Object.keys(n.drm).filter((function(e){return n=e,[f].filter((function(e){return e===n})).length;var n})).length||a().safari))return!1;if(v(e)&&e.type&&~d.indexOf(e.type))return e.src;if(v(e)&&e.src&&p(e.src))return e.src;for(var o=(e=Array.isArray(e)?e:i(e)).length-1;o>=0;o--){var u=e[o];if(u.type&&~d.indexOf(u.type))return u.src;if(p(u.src))return u.src}return!1},function(e,n){if("object"==typeof exports&&"undefined"!=typeof module)return n;"flowplayer"in e||(e.flowplayer={extensions:[]});var t=e.flowplayer;"function"==typeof t?t(n):(Array.isArray(t.extensions)||(t.extensions=[]),~t.extensions.indexOf(n)||t.extensions.push(n))}(window,C),window.attachEvent&&window.attachEvent("onbeforeunload",(function(){window.__flash_savedUnloadHandler=window.__flash_unloadHandler=function(){}})),C}));
