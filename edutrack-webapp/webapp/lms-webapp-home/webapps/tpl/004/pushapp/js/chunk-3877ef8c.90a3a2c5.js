(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3877ef8c"],{"1ebb":function(e,t,n){"use strict";n("b608")},7101:function(e,t,n){"use strict";n.r(t);var r=n("7a23"),o=n("7634"),c=n.n(o),i=n("d8f5"),a=n.n(i),s=n("80ec"),u=n.n(s),p=function(e){return Object(r["x"])("data-v-20e5191e"),e=e(),Object(r["u"])(),e},l={class:"page"},g={class:"login-parent"},d=p((function(){return Object(r["h"])("img",{class:"logo-img",src:c.a},null,-1)})),f=p((function(){return Object(r["h"])("div",{class:"logo-text"}," EDUTRACK CAMPUS ",-1)})),h={class:"login-box"},m={class:"input-box"},b=p((function(){return Object(r["h"])("img",{class:"input-img",src:a.a},null,-1)})),w=p((function(){return Object(r["h"])("input",{type:"hidden",name:"encryptData",id:"encryptData"},null,-1)})),k={class:"input-box",style:{"margin-top":"8px"}},x=p((function(){return Object(r["h"])("img",{class:"input-img",src:u.a},null,-1)})),j=p((function(){return Object(r["h"])("div",{class:"footer"},[Object(r["h"])("div",{class:"footer-text"},"EDUTRACK CYBER CAMPUS"),Object(r["h"])("div",{class:"footer-text"},"메디오피아 EDUTRACK")],-1)}));function O(e,t,n,o,c,i){var a=Object(r["B"])("ConfirmPopUp"),s=Object(r["B"])("Loader");return Object(r["t"])(),Object(r["g"])("div",l,[e.confirmPopUpShowModal?(Object(r["t"])(),Object(r["e"])(a,{key:0})):Object(r["f"])("",!0),e.loginToggle?(Object(r["t"])(),Object(r["e"])(s,{key:1,style:{position:"fixed",margin:"auto 0",display:"flex"},color:"#3182f6",scale:"0.6"})):Object(r["f"])("",!0),Object(r["h"])("div",g,[d,f,Object(r["h"])("div",h,[Object(r["h"])("div",m,[b,Object(r["L"])(Object(r["h"])("input",{class:"input-text",placeholder:"아이디","onUpdate:modelValue":t[0]||(t[0]=function(t){return e.inputId=t})},null,512),[[r["H"],e.inputId]]),w]),Object(r["h"])("div",k,[x,Object(r["L"])(Object(r["h"])("input",{type:"password",class:"input-text",placeholder:"비밀번호","onUpdate:modelValue":t[1]||(t[1]=function(t){return e.inputPw=t})},null,512),[[r["H"],e.inputPw]])])]),Object(r["h"])("div",{class:"login-btn",onClick:t[2]||(t[2]=function(){return e.loginBtn&&e.loginBtn.apply(e,arguments)})},"로그인"),j])])}var v,y=n("1da1"),T=(n("e9c4"),n("ac1f"),n("5319"),n("96cf"),n("cec0")),C=n("5502"),I=n("3e51"),U=n("847e"),P=Object(r["k"])({name:"Login",data:function(){return{inputId:"",inputPw:"",emailCheck:!1,pwCheck:!1,showModal:!1,popUpContent:"",loginToggle:!1,fcmToken:""}},components:{ConfirmPopUp:T["default"],Loader:U["a"]},computed:{confirmPopUpShowModal:function(){return v.getters["ConfirmPopUp/getConfirmModal"]}},created:function(){var e=this;return Object(y["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return v=Object(C["b"])(),e.addScript(),e.fcmToken="",t.next=5,e.$storage.getItem("fcmToken");case 5:e.fcmToken=t.sent;case 6:case"end":return t.stop()}}),t)})))()},methods:{addScript:function(){for(var e=["https://secure.nuguya.com/nuguya/nice.nuguya.oivs.crypto.js","https://secure.nuguya.com/nuguya/nice.nuguya.oivs.msg.js","https://secure.nuguya.com/nuguya/nice.nuguya.oivs.util.js"],t=0,n=e.length;t<n;t++){var r=document.createElement("script");r.src=e[t],r.async=!0,document.head.appendChild(r)}},loginBtn:function(){var e=this;return Object(y["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.emailCheck||!e.pwCheck){t.next=5;break}return t.next=3,e.pushLogin();case 3:t.next=7;break;case 5:return t.next=7,e.loginFail();case 7:case"end":return t.stop()}}),t)})))()},pushLogin:function(){var e=this;return Object(y["a"])(regeneratorRuntime.mark((function t(){var n,r,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.loginToggle){t.next=35;break}return n=makeSendInfo(e.inputId,e.inputPw),null===e.fcmToken&&(e.fcmToken="notToken"),e.loginToggle=!0,t.next=6,v.dispatch("Login/login",JSON.stringify({userId:e.inputId,userPw:e.inputPw,fcmToken:e.fcmToken,encrypt:n}));case 6:return r=t.sent,e.loginToggle=!1,t.next=10,e.$storage.setItem("userId",e.inputId,{expire:"90d"});case 10:if("error"===r||"loginFail"===r){t.next=34;break}if(!r){t.next=31;break}return t.next=14,e.$storage.setItem("userId",e.inputId,{expire:"90d"});case 14:return t.next=16,e.$storage.setItem("accessToken",r.datas[0]["accessToken"],{expire:"90d"});case 16:return t.next=18,e.$storage.setItem("refreshToken",r.datas[0]["refreshToken"],{expire:"90d"});case 18:return t.next=20,v.dispatch("UserInfo/getUserInfo",JSON.stringify({userId:e.inputId,fcmToken:e.fcmToken}));case 20:if(o=t.sent,"error"===o){t.next=28;break}return t.next=24,e.$storage.setItem("accessToken",o.datas[0]["accessToken"],{expire:"90d"});case 24:return t.next=26,e.$router.replace({name:"Home"});case 26:t.next=29;break;case 28:e.serverError();case 29:t.next=32;break;case 31:e.serverError();case 32:t.next=35;break;case 34:"loginFail"===r?e.loginFail():e.serverError();case 35:case"end":return t.stop()}}),t)})))()},loginFail:function(){this.popUpDialog("아이디 비밀번호를 다시 확인해주세요.")},withdrawUser:function(){this.popUpDialog("이미 탈퇴한 회원입니다.")},serverError:function(){this.popUpDialog("서버 에러입니다.")},popUpDialog:function(e){v.dispatch("ConfirmPopUp/confirmPopUp",{showModal:!0,content:e}),this.wnDialogShow()},wnDialogShow:function(){return Object(y["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,I["a"].execute("wnDialogShow",{callback:I["a"].cb(function(){var e=Object(y["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:"CLOSE"==t.status&&v.dispatch("ConfirmPopUp/confirmPopUp",{showModal:!1});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())});case 2:case"end":return e.stop()}}),e)})))()}},watch:{inputId:function(){this.inputId.length>2?this.emailCheck=!0:this.emailCheck=!1},inputPw:function(){this.inputPw.length>2?this.pwCheck=!0:this.pwCheck=!1}}}),R=(n("1ebb"),n("d959")),S=n.n(R);const D=S()(P,[["render",O],["__scopeId","data-v-20e5191e"]]);t["default"]=D},7634:function(e,t,n){e.exports=n.p+"img/logo_dev.55de74df.svg"},"80ec":function(e,t,n){e.exports=n.p+"img/login-pw.91ab5fc3.svg"},b608:function(e,t,n){},d8f5:function(e,t,n){e.exports=n.p+"img/login-id.d41af979.svg"}}]);
//# sourceMappingURL=chunk-3877ef8c.90a3a2c5.js.map